{"ast":null,"code":"var _jsxFileName = \"/Users/malaikahussain/Documents/Semester08/Cloud/project/frontend/src/pages/UploadImage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useContext } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { AuthContext } from '../context/AuthContext';\nimport { uploadImage } from '../services/images';\nimport './UploadImage.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UploadImage = () => {\n  _s();\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    file: null\n  });\n  const [preview, setPreview] = useState('');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const {\n    token\n  } = useContext(AuthContext);\n  const navigate = useNavigate();\n  const handleChange = e => {\n    if (e.target.name === 'file') {\n      const file = e.target.files[0];\n      if (file) {\n        setFormData({\n          ...formData,\n          file\n        });\n\n        // Create a preview\n        const reader = new FileReader();\n        reader.onloadend = () => {\n          setPreview(reader.result);\n        };\n        reader.readAsDataURL(file);\n      }\n    } else {\n      setFormData({\n        ...formData,\n        [e.target.name]: e.target.value\n      });\n    }\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError('');\n    setLoading(true);\n    if (!formData.file) {\n      setError('Please select an image to upload');\n      setLoading(false);\n      return;\n    }\n    try {\n      // Convert the file to base64\n      const reader = new FileReader();\n      reader.readAsDataURL(formData.file);\n      reader.onload = async () => {\n        const base64Image = reader.result;\n        await uploadImage({\n          title: formData.title,\n          description: formData.description,\n          base64Image\n        }, token);\n        setLoading(false);\n        navigate('/gallery');\n      };\n      reader.onerror = () => {\n        setError('Error reading the file');\n        setLoading(false);\n      };\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Failed to upload image');\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"upload-image\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Upload New Image\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"title\",\n          children: \"Title\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"title\",\n          name: \"title\",\n          className: \"form-control\",\n          value: formData.title,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"description\",\n          children: \"Description (optional)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          id: \"description\",\n          name: \"description\",\n          className: \"form-control\",\n          value: formData.description,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"file\",\n          children: \"Image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          id: \"file\",\n          name: \"file\",\n          className: \"form-control\",\n          onChange: handleChange,\n          accept: \"image/*\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), preview && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"image-preview\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: preview,\n          alt: \"Preview\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-primary btn-block\",\n        disabled: loading,\n        children: loading ? 'Uploading...' : 'Upload Image'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n};\n_s(UploadImage, \"1WidReTyh8JA1X63a/kFTGbuPmo=\", false, function () {\n  return [useNavigate];\n});\n_c = UploadImage;\nexport default UploadImage;\nvar _c;\n$RefreshReg$(_c, \"UploadImage\");","map":{"version":3,"names":["React","useState","useContext","useNavigate","AuthContext","uploadImage","jsxDEV","_jsxDEV","UploadImage","_s","formData","setFormData","title","description","file","preview","setPreview","error","setError","loading","setLoading","token","navigate","handleChange","e","target","name","files","reader","FileReader","onloadend","result","readAsDataURL","value","handleSubmit","preventDefault","onload","base64Image","onerror","err","_err$response","_err$response$data","response","data","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","htmlFor","type","id","onChange","required","accept","src","alt","disabled","_c","$RefreshReg$"],"sources":["/Users/malaikahussain/Documents/Semester08/Cloud/project/frontend/src/pages/UploadImage.js"],"sourcesContent":["import React, { useState, useContext } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { AuthContext } from '../context/AuthContext';\nimport { uploadImage } from '../services/images';\nimport './UploadImage.css';\n\nconst UploadImage = () => {\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    file: null\n  });\n  const [preview, setPreview] = useState('');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const { token } = useContext(AuthContext);\n  const navigate = useNavigate();\n\n  const handleChange = (e) => {\n    if (e.target.name === 'file') {\n      const file = e.target.files[0];\n      if (file) {\n        setFormData({\n          ...formData,\n          file\n        });\n\n        // Create a preview\n        const reader = new FileReader();\n        reader.onloadend = () => {\n          setPreview(reader.result);\n        };\n        reader.readAsDataURL(file);\n      }\n    } else {\n      setFormData({\n        ...formData,\n        [e.target.name]: e.target.value\n      });\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    setLoading(true);\n\n    if (!formData.file) {\n      setError('Please select an image to upload');\n      setLoading(false);\n      return;\n    }\n\n    try {\n      // Convert the file to base64\n      const reader = new FileReader();\n      reader.readAsDataURL(formData.file);\n      reader.onload = async () => {\n        const base64Image = reader.result;\n        \n        await uploadImage({\n          title: formData.title,\n          description: formData.description,\n          base64Image\n        }, token);\n        \n        setLoading(false);\n        navigate('/gallery');\n      };\n      reader.onerror = () => {\n        setError('Error reading the file');\n        setLoading(false);\n      };\n    } catch (err) {\n      setError(err.response?.data?.message || 'Failed to upload image');\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"upload-image\">\n      <h2>Upload New Image</h2>\n      {error && <div className=\"error-message\">{error}</div>}\n      <form onSubmit={handleSubmit}>\n        <div className=\"form-group\">\n          <label htmlFor=\"title\">Title</label>\n          <input\n            type=\"text\"\n            id=\"title\"\n            name=\"title\"\n            className=\"form-control\"\n            value={formData.title}\n            onChange={handleChange}\n            required\n          />\n        </div>\n        <div className=\"form-group\">\n          <label htmlFor=\"description\">Description (optional)</label>\n          <textarea\n            id=\"description\"\n            name=\"description\"\n            className=\"form-control\"\n            value={formData.description}\n            onChange={handleChange}\n          />\n        </div>\n        <div className=\"form-group\">\n          <label htmlFor=\"file\">Image</label>\n          <input\n            type=\"file\"\n            id=\"file\"\n            name=\"file\"\n            className=\"form-control\"\n            onChange={handleChange}\n            accept=\"image/*\"\n            required\n          />\n        </div>\n        {preview && (\n          <div className=\"image-preview\">\n            <img src={preview} alt=\"Preview\" />\n          </div>\n        )}\n        <button \n          type=\"submit\" \n          className=\"btn btn-primary btn-block\"\n          disabled={loading}\n        >\n          {loading ? 'Uploading...' : 'Upload Image'}\n        </button>\n      </form>\n    </div>\n  );\n};\n\nexport default UploadImage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}